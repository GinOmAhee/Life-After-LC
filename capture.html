<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  import {
    getFirestore,
    doc,
    getDoc,
    updateDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAQNThNeCaMD7Z8O8mhCGsYyXbg2X8bpms",
    authDomain: "life-after-loop-catcher.firebaseapp.com",
    projectId: "life-after-loop-catcher",
    storageBucket: "life-after-loop-catcher.appspot.com",
    messagingSenderId: "664318439902",
    appId: "1:664318439902:web:93748f55f1cb547bbead4f"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Parse URL params
  const urlParams = new URLSearchParams(window.location.search);
  const ideaId = urlParams.get('id');
  const ideaTitle = urlParams.get('title');

  if (ideaTitle) {
    document.getElementById('ideaTitle').textContent =
      `Creating: ${decodeURIComponent(ideaTitle)}`;
  }

  // Expose globals for app.js
  window.db = db;
  window.auth = auth;
  window.ideaId = ideaId;
  window.ideaTitle = ideaTitle;

  // Let app.js know which page we're on
  window.currentPage = 'capture';
</script>

<!-- Make sure app.js is loaded AFTER the module above -->
<script src="app.js"></script>
